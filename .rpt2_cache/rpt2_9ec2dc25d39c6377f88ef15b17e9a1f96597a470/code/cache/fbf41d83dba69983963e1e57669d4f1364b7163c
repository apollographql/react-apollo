{"map":"{\"version\":3,\"file\":\"walkTree.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/walkTree.ts\"],\"names\":[],\"mappings\":\"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\"}","code":"import * as React from 'react';\r\nfunction getProps(element) {\r\n    return element.props || element.attributes;\r\n}\r\nfunction isReactElement(element) {\r\n    return !!element.type;\r\n}\r\nfunction isComponentClass(Comp) {\r\n    return Comp.prototype && (Comp.prototype.render || Comp.prototype.isReactComponent);\r\n}\r\nfunction providesChildContext(instance) {\r\n    return !!instance.getChildContext;\r\n}\r\nexport function walkTree(element, context, visitor, newContext) {\r\n    if (newContext === void 0) { newContext = new Map(); }\r\n    if (!element) {\r\n        return;\r\n    }\r\n    if (Array.isArray(element)) {\r\n        element.forEach(function (item) { return walkTree(item, context, visitor, newContext); });\r\n        return;\r\n    }\r\n    if (isReactElement(element)) {\r\n        if (typeof element.type === 'function') {\r\n            var Comp = element.type;\r\n            var props = Object.assign({}, Comp.defaultProps, getProps(element));\r\n            var childContext_1 = context;\r\n            var child = void 0;\r\n            if (isComponentClass(Comp)) {\r\n                var instance_1 = new Comp(props, context);\r\n                Object.defineProperty(instance_1, 'props', {\r\n                    value: instance_1.props || props,\r\n                });\r\n                instance_1.context = instance_1.context || context;\r\n                instance_1.state = instance_1.state || null;\r\n                instance_1.setState = function (newState) {\r\n                    if (typeof newState === 'function') {\r\n                        newState = newState(instance_1.state, instance_1.props, instance_1.context);\r\n                    }\r\n                    instance_1.state = Object.assign({}, instance_1.state, newState);\r\n                };\r\n                if (Comp.getDerivedStateFromProps) {\r\n                    var result = Comp.getDerivedStateFromProps(instance_1.props, instance_1.state);\r\n                    if (result !== null) {\r\n                        instance_1.state = Object.assign({}, instance_1.state, result);\r\n                    }\r\n                }\r\n                else if (instance_1.UNSAFE_componentWillMount) {\r\n                    instance_1.UNSAFE_componentWillMount();\r\n                }\r\n                else if (instance_1.componentWillMount) {\r\n                    instance_1.componentWillMount();\r\n                }\r\n                if (providesChildContext(instance_1)) {\r\n                    childContext_1 = Object.assign({}, context, instance_1.getChildContext());\r\n                }\r\n                if (visitor(element, instance_1, newContext, context, childContext_1) === false) {\r\n                    return;\r\n                }\r\n                child = instance_1.render();\r\n            }\r\n            else {\r\n                if (visitor(element, null, newContext, context) === false) {\r\n                    return;\r\n                }\r\n                child = Comp(props, context);\r\n            }\r\n            if (child) {\r\n                if (Array.isArray(child)) {\r\n                    child.forEach(function (item) { return walkTree(item, childContext_1, visitor, newContext); });\r\n                }\r\n                else {\r\n                    walkTree(child, childContext_1, visitor, newContext);\r\n                }\r\n            }\r\n        }\r\n        else if (element.type._context || element.type.Consumer) {\r\n            if (visitor(element, null, newContext, context) === false) {\r\n                return;\r\n            }\r\n            var child = void 0;\r\n            if (!!element.type._context) {\r\n                newContext = new Map(newContext);\r\n                newContext.set(element.type, element.props.value);\r\n                child = element.props.children;\r\n            }\r\n            else {\r\n                var value = element.type._currentValue;\r\n                if (newContext.has(element.type.Provider)) {\r\n                    value = newContext.get(element.type.Provider);\r\n                }\r\n                child = element.props.children(value);\r\n            }\r\n            if (child) {\r\n                if (Array.isArray(child)) {\r\n                    child.forEach(function (item) { return walkTree(item, context, visitor, newContext); });\r\n                }\r\n                else {\r\n                    walkTree(child, context, visitor, newContext);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (visitor(element, null, newContext, context) === false) {\r\n                return;\r\n            }\r\n            if (element.props && element.props.children) {\r\n                React.Children.forEach(element.props.children, function (child) {\r\n                    if (child) {\r\n                        walkTree(child, context, visitor, newContext);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    else if (typeof element === 'string' || typeof element === 'number') {\r\n        visitor(element, null, newContext, context);\r\n    }\r\n}\r\n//# sourceMappingURL=walkTree.js.map","dts":{"name":"/Users/jovi/Documents/SideProjects/react-apollo/src/walkTree.d.ts","writeByteOrderMark":false,"text":"import * as React from 'react';\r\nexport interface Context {\r\n    [key: string]: any;\r\n}\r\nexport declare function walkTree(element: React.ReactNode, context: Context, visitor: (element: React.ReactNode, instance: React.Component<any> | null, newContextMap: Map<any, any>, context: Context, childContext?: Context) => boolean | void, newContext?: Map<any, any>): void;\r\n"}}
