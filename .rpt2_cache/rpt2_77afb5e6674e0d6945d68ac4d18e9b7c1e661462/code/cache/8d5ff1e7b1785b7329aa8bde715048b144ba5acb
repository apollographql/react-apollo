{"map":"{\"version\":3,\"file\":\"query-hoc.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/query-hoc.tsx\"],\"names\":[],\"mappings\":\";AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAG/B,IAAM,oBAAoB,GAAG,OAAO,CAAC,yBAAyB,CAAC,CAAC;AAEhE,OAAO,EAAE,MAAM,EAAE,MAAM,UAAU,CAAC;AAElC,OAAO,EAAE,OAAO,IAAI,KAAK,EAAE,MAAM,SAAS,CAAC;AAC3C,OAAO,EACL,cAAc,EACd,WAAW,EACX,2BAA2B,EAC3B,wBAAwB,EACxB,qBAAqB,GACtB,MAAM,aAAa,CAAC;AAErB,MAAM,UAAU,SAAS,CAMvB,QAAsB,EACtB,gBAAqF;IAArF,iCAAA,EAAA,qBAAqF;IAGrF,IAAM,SAAS,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;IAGjC,IAAA,6BAAkC,EAAlC,uDAAkC,EAClC,0BAA4B,EAA5B,iDAA4B,EAC5B,2BAAgB,EAAhB,qCAAgB,CACG;IAErB,IAAI,iBAAiB,GAAG,OAAoC,CAAC;IAC7D,IAAI,OAAO,iBAAiB,KAAK,UAAU,EAAE;QAC3C,iBAAiB,GAAG,cAAM,OAAA,OAAoB,EAApB,CAAoB,CAAC;KAChD;IAED,IAAI,cAAc,GAAG,IAA+B,CAAC;IACrD,IAAI,OAAO,cAAc,KAAK,UAAU,EAAE;QACxC,cAAc,GAAG,cAAM,OAAA,IAAW,EAAX,CAAW,CAAC;KACpC;IAGD,IAAI,eAAmC,CAAC;IACxC,OAAO,UACL,gBAA2D;QAE3D,IAAM,kBAAkB,GAAM,KAAK,SAAI,cAAc,CAAC,gBAAgB,CAAC,MAAG,CAAC;QAC3E;YAAsB,mCAAgC;YAAtD;;YAsDA,CAAC;YAlDC,wBAAM,GAAN;gBAAA,iBAiDC;gBAhDC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;gBACvB,IAAM,UAAU,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;gBACzC,IAAM,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,sBAAM,iBAAiB,CAAC,KAAK,CAAC,CAAE,CAAC;gBAEhF,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,SAAS,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;oBACpE,IAAI,CAAC,SAAS,GAAG,2BAA2B,CAC1C,SAAS,EACT,KAAK,EACL,kBAAkB,EAClB,cAAc,CAAC,gBAAgB,CAAC,CACjC,CAAC;iBACH;gBACD,OAAO,CACL,oBAAC,KAAK,uBACA,IAAI,IACR,WAAW,EAAE,kBAAkB,EAC/B,IAAI,EAAE,UAAU,EAChB,KAAK,EAAE,QAAQ,EACf,kBAAkB,WAEjB,UAAC,EAAyB;oBAAvB,IAAA,aAAS,EAAE,cAAI,EAAE,0CAAI;;oBACvB,IAAI,gBAAgB,CAAC,OAAO,EAAE;wBAC5B,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;wBACpB,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE;4BAC/B,GAAG,EAAE,KAAI,CAAC,kBAAkB;yBAC7B,CAAC,CAAC;qBACJ;oBAED,IAAI,UAAU;wBAAE,OAAO,oBAAC,gBAAgB,uBAAK,KAAK,EAAI,CAAC;oBAIvD,IAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,IAAI,EAAE,CAAC,CAAC;oBAC5C,IAAM,IAAI,GAAG,gBAAgB,CAAC,IAAI,IAAI,MAAM,CAAC;oBAC7C,IAAI,UAAU,aAAK,GAAC,IAAI,IAAG,MAAM,KAAE,CAAC;oBACpC,IAAI,gBAAgB,CAAC,KAAK,EAAE;wBAC1B,IAAM,SAAS;4BACb,GAAC,IAAI,IAAG,MAAM;4BACd,WAAQ,GAAE,KAAe;+BAC1B,CAAC;wBACF,eAAe,GAAG,gBAAgB,CAAC,KAAK,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;wBACrE,UAAU,GAAG,eAAe,CAAC;qBAC9B;oBAED,OAAO,oBAAC,gBAAgB,uBAAK,KAAK,EAAM,UAAU,EAAI,CAAC;gBACzD,CAAC,CACK,CACT,CAAC;YACJ,CAAC;YApDM,mBAAW,GAAG,kBAAkB,CAAC;YACjC,wBAAgB,GAAG,gBAAgB,CAAC;YAoD7C,cAAC;SAAA,AAtDD,CAAsB,WAAW,GAsDhC;QAGD,OAAO,oBAAoB,CAAC,OAAO,EAAE,gBAAgB,EAAE,EAAE,CAAC,CAAC;IAC7D,CAAC,CAAC;AACJ,CAAC\"}","code":"import * as tslib_1 from \"tslib\";\r\nimport * as React from 'react';\r\nvar hoistNonReactStatics = require('hoist-non-react-statics');\r\nimport { parser } from './parser';\r\nimport { default as Query } from './Query';\r\nimport { getDisplayName, GraphQLBase, calculateVariablesFromProps, defaultMapPropsToOptions, defaultMapPropsToSkip, } from './hoc-utils';\r\nexport function withQuery(document, operationOptions) {\r\n    if (operationOptions === void 0) { operationOptions = {}; }\r\n    var operation = parser(document);\r\n    var _a = operationOptions.options, options = _a === void 0 ? defaultMapPropsToOptions : _a, _b = operationOptions.skip, skip = _b === void 0 ? defaultMapPropsToSkip : _b, _c = operationOptions.alias, alias = _c === void 0 ? 'Apollo' : _c;\r\n    var mapPropsToOptions = options;\r\n    if (typeof mapPropsToOptions !== 'function') {\r\n        mapPropsToOptions = function () { return options; };\r\n    }\r\n    var mapPropsToSkip = skip;\r\n    if (typeof mapPropsToSkip !== 'function') {\r\n        mapPropsToSkip = function () { return skip; };\r\n    }\r\n    var lastResultProps;\r\n    return function (WrappedComponent) {\r\n        var graphQLDisplayName = alias + \"(\" + getDisplayName(WrappedComponent) + \")\";\r\n        var GraphQL = (function (_super) {\r\n            tslib_1.__extends(GraphQL, _super);\r\n            function GraphQL() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            GraphQL.prototype.render = function () {\r\n                var _this = this;\r\n                var props = this.props;\r\n                var shouldSkip = mapPropsToSkip(props);\r\n                var opts = shouldSkip ? Object.create(null) : tslib_1.__assign({}, mapPropsToOptions(props));\r\n                if (!shouldSkip && !opts.variables && operation.variables.length > 0) {\r\n                    opts.variables = calculateVariablesFromProps(operation, props, graphQLDisplayName, getDisplayName(WrappedComponent));\r\n                }\r\n                return (React.createElement(Query, tslib_1.__assign({}, opts, { displayName: graphQLDisplayName, skip: shouldSkip, query: document, warnUnhandledError: true }), function (_a) {\r\n                    var _ = _a.client, data = _a.data, r = tslib_1.__rest(_a, [\"client\", \"data\"]);\r\n                    var _b, _c;\r\n                    if (operationOptions.withRef) {\r\n                        _this.withRef = true;\r\n                        props = Object.assign({}, props, {\r\n                            ref: _this.setWrappedInstance,\r\n                        });\r\n                    }\r\n                    if (shouldSkip)\r\n                        return React.createElement(WrappedComponent, tslib_1.__assign({}, props));\r\n                    var result = Object.assign(r, data || {});\r\n                    var name = operationOptions.name || 'data';\r\n                    var childProps = (_b = {}, _b[name] = result, _b);\r\n                    if (operationOptions.props) {\r\n                        var newResult = (_c = {},\r\n                            _c[name] = result,\r\n                            _c.ownProps = props,\r\n                            _c);\r\n                        lastResultProps = operationOptions.props(newResult, lastResultProps);\r\n                        childProps = lastResultProps;\r\n                    }\r\n                    return React.createElement(WrappedComponent, tslib_1.__assign({}, props, childProps));\r\n                }));\r\n            };\r\n            GraphQL.displayName = graphQLDisplayName;\r\n            GraphQL.WrappedComponent = WrappedComponent;\r\n            return GraphQL;\r\n        }(GraphQLBase));\r\n        return hoistNonReactStatics(GraphQL, WrappedComponent, {});\r\n    };\r\n}\r\n//# sourceMappingURL=query-hoc.js.map","dts":{"name":"/Users/jovi/Documents/SideProjects/react-apollo/src/query-hoc.d.ts","writeByteOrderMark":false,"text":"import * as React from 'react';\r\nimport { DocumentNode } from 'graphql';\r\nimport { OperationOption, DataProps } from './types';\r\nexport declare function withQuery<TProps extends TGraphQLVariables | {} = {}, TData = {}, TGraphQLVariables = {}, TChildProps = DataProps<TData, TGraphQLVariables>>(document: DocumentNode, operationOptions?: OperationOption<TProps, TData, TGraphQLVariables, TChildProps>): (WrappedComponent: React.ComponentType<TChildProps & TProps>) => React.ComponentClass<TProps, any>;\r\n"}}
